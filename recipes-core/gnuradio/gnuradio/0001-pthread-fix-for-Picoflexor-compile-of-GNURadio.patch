From 593e4552a0fc2ab8674e5b539631c6cd33993818 Mon Sep 17 00:00:00 2001
From: Brandon Smith <brandon.smith@drs.com>
Date: Tue, 18 Apr 2017 16:12:40 -0400
Subject: [PATCH] pthread fix for Picoflexor compile of GNURadio

---
 gnuradio-runtime/lib/CMakeLists.txt | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/gnuradio-runtime/lib/CMakeLists.txt b/gnuradio-runtime/lib/CMakeLists.txt
index efbfa92..e4aa80e 100644
--- a/gnuradio-runtime/lib/CMakeLists.txt
+++ b/gnuradio-runtime/lib/CMakeLists.txt
@@ -267,6 +267,14 @@ link_directories(${CPPUNIT_LIBRARY_DIRS})
 add_library(test-gnuradio-runtime SHARED ${test_gnuradio_runtime_sources})
 target_link_libraries(test-gnuradio-runtime gnuradio-runtime gnuradio-pmt ${CPPUNIT_LIBRARIES} ${Boost_LIBRARIES} ${LOG4CPP_LIBRARIES})
 
+find_package(Threads REQUIRED)
+if(THREADS_HAVE_PTHREAD_ARG)
+  target_compile_options(PUBLIC gnuradio-runtime -pthread)
+endif()
+if(CMAKE_THREAD_LIBS_INIT)
+  target_link_libraries(gnuradio-runtime "${CMAKE_THREAD_LIBS_INIT}")
+endif()
+
 ########################################################################
 # Build the test executable
 # Set the test environment so the build libs will be found under MSVC.
-- 
2.7.1

